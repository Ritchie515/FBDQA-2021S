# Python 计算库

如何加快计算过程？

## 计算库

import numpy as np
import numexpr as ne

nx,ny=1200,1500
a=np.linspace(0.,3.1416,nx*ny).reshape(nx,ny)
for i in range(100):
    b=ne.evaluate("sin(a+i)\*\*2+cos(a+i)\*\*2+a\*\*1.5")

## 并行计算

同时使用多台服务器

## 编译加速

### 动态编译

向量化计算内存占用大

使用jit编译部分代码，不能编译的部分再用python解释器

import numba as nb

f_nb = nb.jit(f_py)

%time f_nb(I, J)

### 静态编译

import pyximport
pyximport.install()

import sys
sys.path.append('data/')

from nested_loop import f_cy

%time res = f_cy(I, J)



%load_ext Cython

%%cython
def f_cy(int I, int J):
    cdef double res = 0
    for i in range(I):
        for j in range (J * I):
            res += 1
    return res

%time res = f_cy(I, J)



# 如何获取alpha

获取手段：金融工程模型

## 模型分类

1.期货债券（CTA商品交易顾问，主要是趋势策略）

2.股票ETF（alpha）

3.期权策略（高杠杆）

## 基本逻辑

选出A股市场最好的股票，构建现货投资组合（长期收益大于股指）；另一部分做空股指期货IF沪深300（1手1个点对应300元）（beta对冲），也可以是IC中证500（1手1个点200元），IH上证50（不常用）

升贴水：期货相对现货低是贴水，期货相对现货高是升水，做空股指期货时希望在入场时是升水，不希望是贴水

也可以融券，但是要交利息

## 典型案例

持仓：超配传媒，计算机（认为超配的行业能跑赢指数）

alpha策略收益特点：牛市初期收益较高（收益主要来自升水对冲），牛市中期回撤（IF大幅升水导致做空端损失，股票收益又上的没那么快导致总体损失，要防止期货端被打穿强制平仓，要尤其注意风险管理），熊市初期略有回撤但远小于市场（判断自己是否为alpha策略的重要标准，注意不能净持仓空头）

## 商品期货交易

### 商品套利（配对）

两个高度相关期货产品出现高价差时做空价差

注意：相关性不能完全代表标的，还要注意基本面和时间周期，不要跨板块套利

### 跨期套利

不同久期的期货价差

### 产品特性跨期

### 实例

在不同行业进行配对交易进行分散化处理使收益曲线更加平滑

## alpha策略的一般研发流程--交易型策略

注意：规律性现象不一定是真规律，可能没法长期维持

#### 多空策略：强者恒强，弱者恒弱，做价差的发散

HANS123：开盘30min是对品种比较有效的定价阶段，价格区间决定价格波动范围。之后价格突破上轨就做多，突破下轨时平仓做空，一个交易日后平仓

#### 回归策略：强弱交替，天道轮回（比较常用，有金融逻辑支撑）（ETF套利）

一二级市场套利：IOPV和ETF交易价格之间套利（买卖ETF和申赎）

二级市场轮动：不同品种ETF之间价差配对（需要对冲，不能有净持仓）

期现套利：在IF和ETF之间套利

# 中期练习

5月14日截止

